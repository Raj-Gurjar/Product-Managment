# ============================================================
# Docker Compose - Runs PostgreSQL database in a container
# ============================================================
#
# Think of Docker like a virtual machine that runs ONLY your database.
# You don't need to install PostgreSQL on your computer!
#
# COMMANDS YOU'LL USE:
#   docker-compose up -d      → Start the database (runs in background)
#   docker-compose down        → Stop the database
#   docker-compose logs        → See database logs if something fails
#   docker-compose down -v     → Stop + DELETE all data (fresh start)
#   docker ps                  → Check if container is running
# ============================================================

version: '3.8'

services:
  postgres:
    image: postgres:15             # Downloads PostgreSQL v15 image
    container_name: napses-db      # Name of your container
    restart: unless-stopped        # Auto-restart if it crashes

    environment:                   # Database credentials (like .env vars)
      POSTGRES_USER: postgres      # Username to connect
      POSTGRES_PASSWORD: postgres  # Password to connect
      POSTGRES_DB: napses_db       # Database name (auto-created)

    ports:
      - '5432:5432'                # Maps container port → your machine's port
                                   # Your app connects to localhost:5432

    volumes:
      - pgdata:/var/lib/postgresql/data   # Saves data even if container restarts

volumes:
  pgdata:                          # Named volume for persistent storage
