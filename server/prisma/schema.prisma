// ==========================================================
// Prisma Schema -- defines your database tables
// ==========================================================
//
// In Express, you'd write raw SQL:
//   CREATE TABLE products (id UUID PRIMARY KEY, title VARCHAR ...);
//
// With Prisma, you define models here and Prisma creates the
// SQL tables for you automatically.
//
// COMMANDS:
//   npx prisma migrate dev --name init   → Create tables from this file
//   npx prisma generate                  → Generate TypeScript types
//   npx prisma studio                    → Open visual DB browser
// ==========================================================

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL") // reads from .env file
}

model Product {
  id             String    @id @default(uuid())        // auto-generated UUID
  orderId        String                                 // reference to order
  title          String                                 // product title
  description    String?                                // optional (? = nullable)
  quantity       Int                                    // integer
  totalPrice     Decimal   @db.Decimal(10, 2)           // e.g. 99999999.99
  totalDiscount  Decimal   @db.Decimal(10, 2)           // must be <= totalPrice
  createdAt      DateTime  @default(now())              // auto-set on create
  updatedAt      DateTime  @updatedAt                   // auto-set on update
  deletedAt      DateTime?                              // null = active, date = soft-deleted

  @@index([orderId])
  @@index([deletedAt])
  @@map("products") // actual table name in PostgreSQL
}
